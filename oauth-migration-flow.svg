<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 700">
  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#555"/>
    </marker>
    <marker id="arrow-green" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#22c55e"/>
    </marker>
    <marker id="arrow-purple" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#a855f7"/>
    </marker>
  </defs>

  <rect width="1000" height="700" fill="#f8fafc"/>

  <text x="500" y="35" text-anchor="middle" font-family="Arial" font-size="22" font-weight="bold" fill="#1e293b">OAuth Service Data Migration</text>
  <text x="500" y="58" text-anchor="middle" font-family="Arial" font-size="14" fill="#64748b">Cassandra to DynamoDB | Production | Approval Table | 70MB | 1 Hour</text>

  <rect x="20" y="80" width="960" height="240" rx="10" fill="#e0f2fe" stroke="#0ea5e9" stroke-width="2"/>
  <text x="40" y="105" font-family="Arial" font-size="16" font-weight="bold" fill="#0369a1">Phase 1: Data Migration</text>

  <rect x="60" y="130" width="120" height="70" rx="8" fill="#1e293b"/>
  <text x="120" y="165" text-anchor="middle" font-family="Arial" font-size="12" fill="white" font-weight="bold">Migration</text>
  <text x="120" y="182" text-anchor="middle" font-family="Arial" font-size="12" fill="white">Script</text>

  <ellipse cx="280" cy="165" rx="70" ry="45" fill="#ff9f43"/>
  <text x="280" y="160" text-anchor="middle" font-family="Arial" font-size="13" fill="white" font-weight="bold">Cassandra</text>
  <text x="280" y="178" text-anchor="middle" font-family="Arial" font-size="11" fill="white">(approval)</text>

  <rect x="420" y="130" width="120" height="70" rx="8" fill="#ff6b81"/>
  <text x="480" y="160" text-anchor="middle" font-family="Arial" font-size="13" fill="white" font-weight="bold">AWS SQS</text>
  <text x="480" y="178" text-anchor="middle" font-family="Arial" font-size="11" fill="white">Message Queue</text>

  <rect x="600" y="130" width="120" height="70" rx="8" fill="#22c55e"/>
  <text x="660" y="160" text-anchor="middle" font-family="Arial" font-size="13" fill="white" font-weight="bold">OAuth</text>
  <text x="660" y="178" text-anchor="middle" font-family="Arial" font-size="11" fill="white">C2D API</text>

  <ellipse cx="820" cy="165" rx="70" ry="45" fill="#4834d4"/>
  <text x="820" y="160" text-anchor="middle" font-family="Arial" font-size="13" fill="white" font-weight="bold">DynamoDB</text>
  <text x="820" y="178" text-anchor="middle" font-family="Arial" font-size="11" fill="white">(new store)</text>

  <line x1="180" y1="165" x2="205" y2="165" stroke="#555" stroke-width="2" marker-end="url(#arrow)"/>
  <line x1="350" y1="165" x2="415" y2="165" stroke="#555" stroke-width="2" marker-end="url(#arrow)"/>
  <line x1="540" y1="165" x2="595" y2="165" stroke="#555" stroke-width="2" marker-end="url(#arrow)"/>
  <line x1="720" y1="165" x2="745" y2="165" stroke="#555" stroke-width="2" marker-end="url(#arrow)"/>

  <text x="380" y="155" text-anchor="middle" font-family="Arial" font-size="10" fill="#475569">data msg</text>
  <text x="565" y="155" text-anchor="middle" font-family="Arial" font-size="10" fill="#475569">consume</text>
  <text x="733" y="155" text-anchor="middle" font-family="Arial" font-size="10" fill="#475569">write</text>

  <rect x="400" y="220" width="200" height="85" rx="8" fill="#fef3c7" stroke="#f59e0b" stroke-width="2"/>
  <text x="500" y="245" text-anchor="middle" font-family="Arial" font-size="12" font-weight="bold" fill="#92400e">Performance Optimization</text>
  <text x="500" y="265" text-anchor="middle" font-family="Arial" font-size="11" fill="#78350f">Issue: Slow consumption</text>
  <text x="500" y="283" text-anchor="middle" font-family="Arial" font-size="11" fill="#78350f">Solution: DynamoDB dual-write</text>
  <text x="500" y="300" text-anchor="middle" font-family="Arial" font-size="11" fill="#15803d" font-weight="bold">Result: 20min to 8min</text>

  <rect x="20" y="340" width="960" height="160" rx="10" fill="#dcfce7" stroke="#22c55e" stroke-width="2"/>
  <text x="40" y="365" font-family="Arial" font-size="16" font-weight="bold" fill="#166534">Phase 2: Data Verification</text>

  <rect x="100" y="390" width="140" height="60" rx="8" fill="#1e293b"/>
  <text x="170" y="420" text-anchor="middle" font-family="Arial" font-size="12" fill="white" font-weight="bold">Verification</text>
  <text x="170" y="437" text-anchor="middle" font-family="Arial" font-size="12" fill="white">Script</text>

  <rect x="320" y="385" width="180" height="70" rx="8" fill="white" stroke="#22c55e" stroke-width="2"/>
  <text x="410" y="412" text-anchor="middle" font-family="Arial" font-size="12" font-weight="bold" fill="#166534">Consistency Check</text>
  <text x="410" y="432" text-anchor="middle" font-family="Arial" font-size="11" fill="#475569">Cassandra vs DynamoDB</text>
  <text x="410" y="448" text-anchor="middle" font-family="Arial" font-size="10" fill="#64748b">Compare records</text>

  <rect x="570" y="385" width="140" height="70" rx="8" fill="white" stroke="#22c55e" stroke-width="2"/>
  <text x="640" y="415" text-anchor="middle" font-family="Arial" font-size="12" font-weight="bold" fill="#166534">Log Analysis</text>
  <text x="640" y="435" text-anchor="middle" font-family="Arial" font-size="11" fill="#475569">Check inconsistency</text>
  <text x="640" y="450" text-anchor="middle" font-family="Arial" font-size="10" fill="#64748b">Error statistics</text>

  <line x1="240" y1="420" x2="315" y2="420" stroke="#22c55e" stroke-width="2" marker-end="url(#arrow-green)"/>
  <line x1="500" y1="420" x2="565" y2="420" stroke="#22c55e" stroke-width="2" marker-end="url(#arrow-green)"/>

  <rect x="20" y="520" width="960" height="100" rx="10" fill="#f3e8ff" stroke="#a855f7" stroke-width="2"/>
  <text x="40" y="545" font-family="Arial" font-size="16" font-weight="bold" fill="#7e22ce">Phase 3: Report to SNM</text>

  <rect x="150" y="560" width="180" height="45" rx="6" fill="white" stroke="#a855f7" stroke-width="1.5"/>
  <text x="240" y="587" text-anchor="middle" font-family="Arial" font-size="12" fill="#581c87">Migration Logs</text>

  <rect x="410" y="560" width="180" height="45" rx="6" fill="white" stroke="#a855f7" stroke-width="1.5"/>
  <text x="500" y="587" text-anchor="middle" font-family="Arial" font-size="12" fill="#581c87">Verification Results</text>

  <rect x="670" y="560" width="180" height="45" rx="6" fill="white" stroke="#a855f7" stroke-width="1.5"/>
  <text x="760" y="587" text-anchor="middle" font-family="Arial" font-size="12" fill="#581c87">Consistency Report</text>

  <circle cx="920" cy="582" r="30" fill="#7e22ce"/>
  <text x="920" y="578" text-anchor="middle" font-family="Arial" font-size="12" fill="white" font-weight="bold">SNM</text>
  <text x="920" y="593" text-anchor="middle" font-family="Arial" font-size="9" fill="white">Review</text>

  <line x1="330" y1="583" x2="405" y2="583" stroke="#a855f7" stroke-width="1.5" marker-end="url(#arrow-purple)"/>
  <line x1="590" y1="583" x2="665" y2="583" stroke="#a855f7" stroke-width="1.5" marker-end="url(#arrow-purple)"/>
  <line x1="850" y1="583" x2="885" y2="583" stroke="#a855f7" stroke-width="2" marker-end="url(#arrow-purple)"/>

  <rect x="750" y="640" width="230" height="50" rx="8" fill="#1e293b"/>
  <text x="865" y="662" text-anchor="middle" font-family="Arial" font-size="11" fill="#94a3b8">Total: ~1h | Data: ~70MB</text>
  <text x="865" y="680" text-anchor="middle" font-family="Arial" font-size="11" fill="#22c55e" font-weight="bold">Production Environment</text>
</svg>
