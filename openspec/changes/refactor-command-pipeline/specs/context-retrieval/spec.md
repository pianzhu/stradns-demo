## 修改需求
### 需求：语义解析（LLM）
系统必须使用大模型输出的命令数组（`a/s/n/t/q/c`）作为唯一入口，并通过指令解析器将每条命令映射为 QueryIR；解析失败时必须统一降级。

#### 场景：解析动作与名称
- 给定：用户查询"打开老伙计"
- 当：进行 LLM 语义解析并通过指令解析器构建 QueryIR
- 则：action 应为 "打开"
- 且：name_hint 应为 "老伙计"

#### 场景：解析量词与范围
- 给定：用户查询"关闭所有卧室的灯"
- 当：进行 LLM 语义解析并通过指令解析器构建 QueryIR
- 则：quantifier 应为 "all"
- 且：scope_include 应包含 "卧室"
- 且：type_hint 应为 "Light"

#### 场景：解析排除语义
- 给定：用户查询"打开除卧室以外的灯"
- 且：已知房间列表包含"卧室"
- 当：进行 LLM 语义解析并通过指令解析器构建 QueryIR
- 则：quantifier 应为 "except"
- 且：scope_exclude 应包含 "卧室"

#### 场景：解析指代
- 给定：用户查询"打开那个"
- 当：进行 LLM 语义解析并通过指令解析器构建 QueryIR
- 则：references 应包含 "@last"

## 新增需求
### 需求：多命令检索拆分
系统必须对解析得到的每条命令独立构建 QueryIR 并执行检索，保持原始命令顺序。

#### 场景：多命令逐条检索
- 给定：用户查询"打开卧室灯并关闭客厅灯"
- 当：解析得到两条命令
- 则：系统应分别对两条命令构建 QueryIR 并执行检索
- 且：返回结果顺序与原命令顺序一致
